<roblox xmlns:xmime="http://www.w3.org/2005/05/xmlmime" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.roblox.com/roblox.xsd" version="4">
	<External>null</External>
	<External>nil</External>
	<Item class="Tool" referent="RBX19971882C999460D8A6076A23649D477">
		<Properties>
			<bool name="CanBeDropped">true</bool>
			<bool name="Enabled">true</bool>
			<CoordinateFrame name="Grip">
				<X>0</X>
				<Y>-2.125</Y>
				<Z>0</Z>
				<R00>1</R00>
				<R01>0</R01>
				<R02>0</R02>
				<R10>0</R10>
				<R11>1</R11>
				<R12>0</R12>
				<R20>0</R20>
				<R21>0</R21>
				<R22>1</R22>
			</CoordinateFrame>
			<bool name="ManualActivationOnly">false</bool>
			<string name="Name">FireGeneral&apos;sSword</string>
			<bool name="RequiresHandle">true</bool>
			<Content name="TextureId"><url>rbxassetid://657542581</url></Content>
			<string name="ToolTip"></string>
		</Properties>
		<Item class="Part" referent="RBXA231A69E4DD443668A55E2CCD7D97724">
			<Properties>
				<bool name="Anchored">false</bool>
				<float name="BackParamA">-0.5</float>
				<float name="BackParamB">0.5</float>
				<token name="BackSurface">0</token>
				<token name="BackSurfaceInput">0</token>
				<float name="BottomParamA">-0.5</float>
				<float name="BottomParamB">0.5</float>
				<token name="BottomSurface">0</token>
				<token name="BottomSurfaceInput">0</token>
				<int name="BrickColor">194</int>
				<CoordinateFrame name="CFrame">
					<X>6.95816422</X>
					<Y>17.3484192</Y>
					<Z>17.3792686</Z>
					<R00>-0.981401861</R00>
					<R01>-0.130912706</R01>
					<R02>-0.140400872</R02>
					<R10>0</R10>
					<R11>0.731388152</R11>
					<R12>-0.681961477</R12>
					<R20>0.191964969</R20>
					<R21>-0.669278264</R21>
					<R22>-0.717785597</R22>
				</CoordinateFrame>
				<bool name="CanCollide">true</bool>
				<PhysicalProperties name="CustomPhysicalProperties">
					<CustomPhysics>false</CustomPhysics>
				</PhysicalProperties>
				<float name="Elasticity">0.5</float>
				<float name="Friction">0.300000012</float>
				<float name="FrontParamA">-0.5</float>
				<float name="FrontParamB">0.5</float>
				<token name="FrontSurface">0</token>
				<token name="FrontSurfaceInput">0</token>
				<float name="LeftParamA">-0.5</float>
				<float name="LeftParamB">0.5</float>
				<token name="LeftSurface">0</token>
				<token name="LeftSurfaceInput">0</token>
				<bool name="Locked">true</bool>
				<token name="Material">256</token>
				<string name="Name">Handle</string>
				<float name="Reflectance">0</float>
				<float name="RightParamA">-0.5</float>
				<float name="RightParamB">0.5</float>
				<token name="RightSurface">0</token>
				<token name="RightSurfaceInput">0</token>
				<Vector3 name="RotVelocity">
					<X>0</X>
					<Y>0</Y>
					<Z>0</Z>
				</Vector3>
				<float name="TopParamA">-0.5</float>
				<float name="TopParamB">0.5</float>
				<token name="TopSurface">0</token>
				<token name="TopSurfaceInput">0</token>
				<float name="Transparency">0</float>
				<Vector3 name="Velocity">
					<X>0</X>
					<Y>0</Y>
					<Z>0</Z>
				</Vector3>
				<token name="formFactorRaw">3</token>
				<token name="shape">1</token>
				<Vector3 name="size">
					<X>0.5</X>
					<Y>5.5</Y>
					<Z>1.5</Z>
				</Vector3>
			</Properties>
			<Item class="SpecialMesh" referent="RBXBC144541B2C34D85A55FCB1C6BA2CC6F">
				<Properties>
					<token name="LODX">2</token>
					<token name="LODY">2</token>
					<Content name="MeshId"><url>rbxassetid://657542263</url></Content>
					<token name="MeshType">5</token>
					<string name="Name">Mesh</string>
					<Vector3 name="Offset">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
					</Vector3>
					<Vector3 name="Scale">
						<X>1</X>
						<Y>1</Y>
						<Z>1</Z>
					</Vector3>
					<Content name="TextureId"><url>rbxassetid://657542428</url></Content>
					<Vector3 name="VertexColor">
						<X>1</X>
						<Y>1</Y>
						<Z>1</Z>
					</Vector3>
				</Properties>
			</Item>
			<Item class="Sound" referent="RBX98AABE83B5914B26AA00A071908DF4B8">
				<Properties>
					<float name="EmitterSize">10</float>
					<bool name="Looped">false</bool>
					<string name="Name">CrystalExplosion</string>
					<bool name="PlayOnRemove">false</bool>
					<float name="PlaybackSpeed">1</float>
					<bool name="Playing">false</bool>
					<token name="RollOffMode">0</token>
					<Ref name="SoundGroup">null</Ref>
					<Content name="SoundId"><url>http://www.roblox.com/asset/?id=84937942</url></Content>
					<double name="TimePosition">0</double>
					<float name="Volume">1</float>
					<float name="xmlRead_MaxDistance_3">10000</float>
				</Properties>
			</Item>
			<Item class="ParticleEmitter" referent="RBXD2FA72D51D0D4587BC3581BA2AD40706">
				<Properties>
					<Vector3 name="Acceleration">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
					</Vector3>
					<ColorSequence name="Color">0 1 0 0 0 1 1 0 0 0 </ColorSequence>
					<float name="Drag">0</float>
					<token name="EmissionDirection">1</token>
					<bool name="Enabled">true</bool>
					<NumberRange name="Lifetime">0.3 0.5 </NumberRange>
					<float name="LightEmission">1</float>
					<bool name="LockedToPart">true</bool>
					<string name="Name">Fire</string>
					<float name="Rate">500</float>
					<NumberRange name="RotSpeed">-100 -100 </NumberRange>
					<NumberRange name="Rotation">-15 15 </NumberRange>
					<NumberSequence name="Size">0 0.39548 0 0.75 0.5 0 1 0.564972 0 </NumberSequence>
					<NumberRange name="Speed">0 0 </NumberRange>
					<Content name="Texture"><url>rbxasset://textures/particles/fire_main.dds</url></Content>
					<NumberSequence name="Transparency">0 0.3 0 0.651 0.4 0 1 0.3 0 </NumberSequence>
					<float name="VelocityInheritance">0</float>
					<float name="VelocitySpread">0</float>
					<float name="ZOffset">-1</float>
				</Properties>
			</Item>
		</Item>
		<Item class="Script" referent="RBXCF8EE1E0362F47E89A9CB12DDB61180F">
			<Properties>
				<bool name="Disabled">false</bool>
				<Content name="LinkedSource"><null></null></Content>
				<string name="Name">Script</string>
				<string name="ScriptGuid">{26A5FA5E-BF51-45F4-A0DA-99B87DADAF9F}</string>
				<ProtectedString name="Source"><![CDATA[--Made by Luckymaxer

Tool = script.Parent
Handle = Tool.Handle

Players = game:GetService("Players")
Debris = game:GetService("Debris")
InsertService = game:GetService("InsertService")

Damage = 5
Eruptions = 5
DistancePerObject = 7
TimeBetweenEruptions = 0.05
EruptionLife = 3
DamagePerTouch = 10

Counters = {}
Erupting = false
ToolEquipped = false

BasePart = Instance.new("Part")
BasePart.Name = "Part"
BasePart.Shape = Enum.PartType.Block
BasePart.FormFactor = Enum.FormFactor.Custom
BasePart.Material = Enum.Material.Plastic
BasePart.TopSurface = Enum.SurfaceType.Smooth
BasePart.BottomSurface = Enum.SurfaceType.Smooth
BasePart.Size = Vector3.new(0.2, 0.2, 0.2)
BasePart.Locked = true
BasePart.Anchored = false
BasePart.CanCollide = true

Sounds = {
	CrystalExplosion = Handle:WaitForChild("CrystalExplosion"),
}

EruptionModel = InsertService:LoadAsset(84929999)
Eruption = EruptionModel:GetChildren()[1]:Clone()
Debris:AddItem(EruptionModel, 1)

Tool.Enabled = true

for i, v in pairs(Eruption:GetChildren()) do
	if v:IsA("BasePart") then
		if v.Name == "Base" then
			v.Transparency = 0
			v.Material = Enum.Material.Slate
			v.BrickColor = BrickColor.new("Reddish brown")
		elseif v.Name == "Crystal" then
			v.Transparency = 0.6
			v.Material = Enum.Material.Slate
			v.BrickColor = BrickColor.new("Really red")
		else
			v.BrickColor = BrickColor.new("Bright red")
		end
	end
end

function IsTeamMate(Player1, Player2)
	return (Player1 and Player2 and not Player1.Neutral and not Player2.Neutral and Player1.TeamColor == Player2.TeamColor)
end

function TagHumanoid(humanoid, player)
	local Creator_Tag = Instance.new("ObjectValue")
	Creator_Tag.Name = "creator"
	Creator_Tag.Value = player
	Debris:AddItem(Creator_Tag, 2)
	Creator_Tag.Parent = humanoid
end

function UntagHumanoid(humanoid)
	for i, v in pairs(humanoid:GetChildren()) do
		if v:IsA("ObjectValue") and v.Name == "creator" then
			v:Destroy()
		end
	end
end

function ParticleExplosion(Parent, Colors) --Creates a random number of particles and lets them fall down from the sky.  
	local NumParticles = math.random(5, 15)
	for i = 0, NumParticles do
		
		--Create the parts for the particles to emit from
		local ParticlePoint = BasePart:Clone()
		ParticlePoint.Transparency = 1
		ParticlePoint.Size = Vector3.new(1, 1, 1)
		ParticlePoint.CFrame = Parent.CFrame * CFrame.new(math.random(-5, 5), math.random(4, 7), math.random(-5, 5))
		
		--Create the particles for display
		local Particle = Instance.new("Fire")
		Particle.Color = Colors[math.random(1, #Colors)]
		Particle.SecondaryColor = Particle.Color
		Particle.Heat = 9
		Particle.Size = 5
		Particle.Enabled = true
		Particle.Parent = ParticlePoint
		
		--Send them flying
		local ParticleForce = Instance.new("BodyForce")
		ParticleForce.force = (Vector3.new(math.random(-20, 20), 40, math.random(-20, 20)) * 7)
		Debris:AddItem(ParticleForce, 0.3)
		ParticleForce.Parent = ParticlePoint
		
		Debris:AddItem(ParticlePoint, (0.1 + math.random()))
		
		ParticlePoint.Parent = Parent
		
	end

end

function CrystalTouched(Hit) --Fired when the chrystal touches something
	if not Hit or not Hit.Parent then
		return
	end	
	local character = Hit.Parent
	local humanoid = character:FindFirstChild("Humanoid")
	if not humanoid or humanoid.Health == 0 then
		return
	end
	local player = Players:GetPlayerFromCharacter(character)
	if player and (player == Player or IsTeamMate(Player, player)) then
		return
	end
	local Counter = character:FindFirstChild("Counter")
	if not Counter then
		Counter = Instance.new("IntValue")
		Counter.Name = "Counter"
		Counter.Value = 0
		table.insert(Counters, {Counter = Counter, Humanoid = humanoid})
		Debris:AddItem(Counter, 0.2)
		Counter.Parent = humanoid
	end
	Counter.Value = (Counter.Value + 1)
end

function ExplodePlayers() --Find the players with a counter variable, then kill them
	for i, v in pairs(Counters) do
		if v and v.Counter and v.Humanoid then
			local humanoid = v.Humanoid
			UntagHumanoid(humanoid)
			TagHumanoid(humanoid, Player)
			humanoid:TakeDamage(v.Counter.Value * DamagePerTouch)
		end
	end
	Counters = {}
end

function DoEruption()
	if not ToolEquipped or not CheckIfAlive() then
		return
	end
	Erupting = true
	local Direction = RootPart.CFrame.lookVector
	local LastPosition = (RootPart.CFrame * CFrame.new(0, -2.5, 0)).p
	
	for i = 1, Eruptions do --Create a new crystal formation
		local EruptionClone = Eruption:Clone()
		EruptionClone.Name = "Eruption"
		local Base = EruptionClone.BaseCenter
		for i, v in pairs(EruptionClone:GetChildren()) do --Move each part into position
			if v:IsA("BasePart") and v ~= Base then
				local offset = (v.CFrame.p - Base.CFrame.p)
				v.CFrame = (v.CFrame - v.CFrame.p + (LastPosition + (Direction * DistancePerObject)) + offset)
				local TouchConn = v.Touched:connect(CrystalTouched)
				Delay(0.2, (function()
					if TouchConn then
						TouchConn:disconnect()
					end
				end))
			end
		end
	
		Base.CFrame = (Base.CFrame - Base.CFrame.p + (LastPosition + (Direction * DistancePerObject)))
		
		ParticleExplosion(Base, {BrickColor.new("Really red").Color, BrickColor.new("Bright red").Color})
		local Sound = Sounds.CrystalExplosion:Clone()
		Sound.Parent = EruptionClone
		Sound:Play()
		
		LastPosition = (LastPosition + (Direction * DistancePerObject)) --Move on to the next eruption
		
		ExplodePlayers()
		
		wait(TimeBetweenEruptions)
		
		Delay((EruptionLife - 1.5), function() --Let physics take over crystal for effect
			for i, v in pairs(EruptionClone:GetChildren()) do
				if v:IsA("BasePart") then
					v.Anchored = true
					Debris:AddItem(v, math.random())
				end
			end
		end)
			
		Debris:AddItem(EruptionClone, EruptionLife)
		EruptionClone.Parent = game:GetService("Workspace")
		
	end
	
	Erupting = false

end

function Swing()
	local SwingParticle = Instance.new("Fire")
	SwingParticle.Name = "SwingParticle"
	SwingParticle.Heat = 9
	SwingParticle.Size = 5
	SwingParticle.Enabled = true
	SwingParticle.Color = BrickColor.new("Bright red").Color
	SwingParticle.SecondaryColor = SwingParticle.Color
	Debris:AddItem(SwingParticle, 1)
	SwingParticle.Parent = Handle
	
	local Animation = Instance.new("StringValue")
	Animation.Name = "toolanim"
	Animation.Value = "Slash"
	Animation.Parent = Tool
	
	DoEruption()

end

function Activated()
	if not ToolEquipped or not CheckIfAlive() or not Tool.Enabled then
		return
	end
	Tool.Enabled = false
	Swing()
	wait(EruptionLife)
	Tool.Enabled = true
end

function CheckIfAlive()
	return (((Character and Character.Parent and Humanoid and Humanoid.Parent and Humanoid.Health > 0 and RootPart and RootPart.Parent and Player and Player.Parent) and true) or false)
end

function Equipped()
	Character = Tool.Parent
	Humanoid = Character:FindFirstChild("Humanoid")
	RootPart = Character:FindFirstChild("HumanoidRootPart")
	Player = Players:GetPlayerFromCharacter(Character)
	if not CheckIfAlive() then
		return
	end
	ToolEquipped = true
end

function Unequipped()
	ToolEquipped = false
end

Tool.Activated:connect(Activated)
Tool.Equipped:connect(Equipped)
Tool.Unequipped:connect(Unequipped)]]></ProtectedString>
			</Properties>
		</Item>
		<Item class="LocalScript" referent="RBX8F96F1D22AFC4C91A9E6ADA80795F769">
			<Properties>
				<bool name="Disabled">false</bool>
				<Content name="LinkedSource"><null></null></Content>
				<string name="Name">MouseIcon</string>
				<string name="ScriptGuid"></string>
				<ProtectedString name="Source"><![CDATA[--Made by Luckymaxer

Mouse_Icon = "rbxasset://textures/GunCursor.png"
Reloading_Icon = "rbxasset://textures/GunWaitCursor.png"

Tool = script.Parent

Mouse = nil

function UpdateIcon()
	if Mouse then
		Mouse.Icon = Tool.Enabled and Mouse_Icon or Reloading_Icon
	end
end

function OnEquipped(ToolMouse)
	Mouse = ToolMouse
	UpdateIcon()
end

function OnChanged(Property)
	if Property == "Enabled" then
		UpdateIcon()
	end
end

Tool.Equipped:connect(OnEquipped)
Tool.Changed:connect(OnChanged)
]]></ProtectedString>
			</Properties>
		</Item>
		<Item class="Camera" referent="RBX84759691C72A448D8D6B27FDE82A4C91">
			<Properties>
				<CoordinateFrame name="CFrame">
					<X>12.6934958</X>
					<Y>16.4568787</Y>
					<Z>17.3424282</Z>
					<R00>-0.0488318168</R00>
					<R01>0.125203475</R01>
					<R02>0.99092859</R02>
					<R10>4.65661343e-010</R10>
					<R11>0.992112219</R11>
					<R12>-0.125353009</R12>
					<R20>-0.998807073</R20>
					<R21>-0.00612121448</R21>
					<R22>-0.0484466329</R22>
				</CoordinateFrame>
				<Ref name="CameraSubject">null</Ref>
				<token name="CameraType">0</token>
				<float name="FieldOfView">40</float>
				<CoordinateFrame name="Focus">
					<X>10.9098234</X>
					<Y>16.6825142</Y>
					<Z>17.4296322</Z>
					<R00>1</R00>
					<R01>0</R01>
					<R02>0</R02>
					<R10>0</R10>
					<R11>1</R11>
					<R12>0</R12>
					<R20>0</R20>
					<R21>0</R21>
					<R22>1</R22>
				</CoordinateFrame>
				<bool name="HeadLocked">true</bool>
				<float name="HeadScale">1</float>
				<string name="Name">ThumbnailCamera</string>
			</Properties>
		</Item>
	</Item>
</roblox>